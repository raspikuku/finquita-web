<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>KuKu's Finquita</title>
    <meta name="description" content="Weather data from KuKu's Finquita.">
    <meta name="author" content="elkuku">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Ubuntu|Ubuntu+Mono' rel='stylesheet' type='text/css'>
    <link href="css/main.css" rel="stylesheet">
</head>
<body>

<div class="container">

    <noscript><h1>Please activate JavaScript.</h1></noscript>

    <h1 id="title"></h1>
    <p id="date"></p>
    <p id="stats"></p>

    <div class="row">
        <div class="col-md-4">
            <p>Temp: <span id="temp"></span> Â°C</p>
            <p>Humid: <span id="humid"></span> %</p>
        </div>
        <div class="col-md-4">
            <a id="picLink" href="">
                <img id="pic" src="" width="320"/>
            </a>
        </div>
        <div class="col-md-4">
            <p>Press: <span id="press"></span> mBar</p>
            <p>Light: <span id="light"></span> lx</p>
        </div>
    </div>

    <hr />
    <iframe width="450" height="260" style="border: 0;"
            src="https://thingspeak.com/channels/154597/charts/1?bgcolor=%23000000&color=%23d62020&dynamic=true&results=60&title=Temperature&type=line&yaxis=%C2%B0C"></iframe>

    <iframe width="150" height="150" style="border: 0;" src="https://thingspeak.com/apps/plugins/91763"></iframe>

    <hr />

    <footer>
        <p>Developed by <a href="https://github.com/elkuku" target="_blank">elkuku</a></p>
    </footer>
</div> <!-- /container -->


<script src="js/jquery-3.1.0.min.js"></script>

<script>
    function update() {

        $('#date').html(new Date().toLocaleString());

        $.get('https://api.thingspeak.com/channels/154597/feeds.json?results=1', function (data) {
            var entry = data.feeds[0];

            $('#title').html(data.channel.name);
            $('#temp').html(entry.field1);
            $('#humid').html(entry.field2);
            $('#press').html(entry.field3);
            $('#light').html(entry.field4);
        });

        $.get('https://gist.githubusercontent.com/raspikuku/51f792d4e3d07b21ad182e9ee178e9fb/raw', function (data) {
            $('#pic').attr('src', data + '&dl=1');
            $('#picLink').attr('href', data);
        });
    }
    update();
    setInterval(update, 10000);
</script>

</body>
</html>
